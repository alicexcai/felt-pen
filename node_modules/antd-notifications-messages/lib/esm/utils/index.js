import * as React from 'react';
import ReactDOM from 'react-dom';
import nextId from 'react-id-generator';
import { Wrapper } from '../components/wrapper';
var instances = [];
var render = function () {
    var elm = document.querySelector('.wrapper-notification');
    ReactDOM.render(React.createElement(Wrapper, { instances: instances }), elm
        ? elm.parentElement
        : document.body.appendChild(document.createElement('DIV')));
};
var onTimeClose = function (duration, key) {
    return setTimeout(function () {
        store.remove(key);
    }, duration);
};
export var store = {
    add: function (_a) {
        var content = _a.content, duration = _a.duration;
        var key = nextId();
        instances.push({ key: key, content: content });
        render();
        if (duration !== 0) {
            onTimeClose(duration, key);
        }
    },
    remove: function (key) {
        if (typeof onTimeClose == 'number') {
            clearTimeout(onTimeClose);
        }
        instances = instances.filter(function (f) { return f.key !== key; });
        render();
    },
};
